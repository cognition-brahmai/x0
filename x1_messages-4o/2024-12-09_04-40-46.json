[
    {
        "role": "user",
        "content": "I am currently utilizing the Python Requests module and I am in need of debugging some OAuth activity. For this purpose, I want to log all requests being executed. I understand that I could retrieve this information using ngrep, however, it doesn't seem to be possible to grep https connections which are necessary for OAuth. How can I enable logging of all URLs and their parameters that Requests is accessing?"
    },
    {
        "role": "assistant",
        "content": "To log all HTTP requests and their details made by the Python `requests` module, including those over HTTPS, you can leverage the built-in logging library in Python. Here's how you can set it up to log the requests and responses:\n\n```python\nimport logging\nimport requests\n\n# Enable logging at the debug level\nlogging.basicConfig(level=logging.DEBUG)\n\n# Create a logger object\nlogger = logging.getLogger()\n\n# Add a console handler to the logger\nconsole_handler = logging.StreamHandler()\nconsole_handler.setLevel(logging.DEBUG)\nlogger.addHandler(console_handler)\n\n# You can add a file handler if you want to save logs to a file\n# file_handler = logging.FileHandler('http_requests.log')\n# file_handler.setLevel(logging.DEBUG)\n# logger.addHandler(file_handler)\n\n# Set the logging level for urllib3 (used by requests) to DEBUG\nlogging.getLogger(\"urllib3\").setLevel(logging.DEBUG)\n\n# Example request to test logging\nresponse = requests.get('https://httpbin.org/get', params={'key': 'value'})\n\n# Print the response content\nprint(response.text)\n```\n\n### Explanation:\n- **Logging Configuration**: We start by configuring logging to output debug-level logs. The `StreamHandler` is used to print logs to the console, but you can also use a `FileHandler` to write logs to a file.\n- **URLlib3 Integration**: The `requests` library uses `urllib3` under the hood, so we set the logging level of `urllib3` to `DEBUG` to capture all the request and response details.\n- **Example Request**: An example request is made to `httpbin.org`, which will appear in your logs with detailed information about the request and response.\n\nThis setup will log all HTTP requests and responses, including headers and content if applicable. It's a useful way to debug OAuth activities and other HTTP interactions when using the `requests` library."
    }
]