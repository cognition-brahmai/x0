[
    {
        "role": "user",
        "content": "How can I place a table on a plot in Matplotlib? I'm struggling with the matplotlib table commands. Here's an example of what I'd like to do:\n\n```python\nimport pylab as plt\n\nplt.figure()\nax=plt.gca()\ny=[1,2,3,4,5,4,3,2,1,1,1,1,1,1,1,1]\nplt.plot([10,10,14,14,10],[2,4,4,2,2],'r')\ncol_labels=['col1','col2','col3']\nrow_labels=['row1','row2','row3']\ntable_vals=[11,12,13,21,22,23,31,32,33]\n# the rectangle is where I want to place the table\nplt.text(11,4.1,'Table Title',size=8)\nplt.plot(y)\nplt.show()\n```\n\nI'd like some help with the table construction code."
    },
    {
        "role": "assistant",
        "content": "To place a table on a plot in Matplotlib, you can use the `table` method from the `matplotlib.pyplot` module. Here's how you can add a table to your plot based on your example:\n\n```python\nimport matplotlib.pyplot as plt\n\n# Create figure and axis\nplt.figure()\nax = plt.gca()\n\n# Your existing plot commands\ny = [1, 2, 3, 4, 5, 4, 3, 2, 1, 1, 1, 1, 1, 1, 1, 1]\nplt.plot([10, 10, 14, 14, 10], [2, 4, 4, 2, 2], 'r')\nplt.plot(y)\n\n# Define table data\ncol_labels = ['Col1', 'Col2', 'Col3']\nrow_labels = ['Row1', 'Row2', 'Row3']\ntable_vals = [[11, 12, 13], [21, 22, 23], [31, 32, 33]]\n\n# Add a table at the bottom of the axes\ntable = plt.table(cellText=table_vals,\n                  colLabels=col_labels,\n                  rowLabels=row_labels,\n                  cellLoc='center',\n                  loc='bottom')\n\n# Adjust layout to make room for the table\nplt.subplots_adjust(left=0.2, bottom=0.2)\n\n# Add a title for the table\nplt.text(11, 4.1, 'Table Title', size=8)\n\n# Display the plot\nplt.show()\n```\n\n### Explanation:\n- **`plt.table(...)`:** This command is used to create the table. You provide the data for the table using `cellText`, the column headers using `colLabels`, and the row headers using `rowLabels`.\n- **`cellLoc='center'`:** This centers the text within each cell.\n- **`loc='bottom'`:** This positions the table at the bottom of the axes.\n- **`plt.subplots_adjust(...)`:** This is used to adjust the layout so the table is visible and doesn't overlap with other plot elements.\n- **`plt.text(...)`:** This places the title of the table at the specified coordinates.\n\nFeel free to adjust the positioning and styling to better fit your plot's design."
    }
]