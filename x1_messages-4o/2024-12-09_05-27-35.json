[
    {
        "role": "user",
        "content": "How can I get the bounding box of the recognized words using python-tesseract? I am currently using python-tesseract to extract words from an image, which is a python wrapper for tesseract OCR code. However, my current code only returns the words and not their location, size, orientation or a bounding box containing them in the image. Is there a way to get this information as well? Here is my current code:\n\n```python\nimport tesseract\n\napi = tesseract.TessBaseAPI()\napi.Init(\".\",\"eng\",tesseract.OEM_DEFAULT)\napi.SetVariable(\"tessedit_char_whitelist\", \"0123456789abcdefghijklmnopqrstuvwxyz\")\napi.SetPageSegMode(tesseract.PSM_AUTO)\n\nmImgFile = \"test.jpg\"\nmBuffer=open(mImgFile,\"rb\").read()\nresult = tesseract.ProcessPagesBuffer(mBuffer,len(mBuffer),api)\nprint \"result(ProcessPagesBuffer)=\",result\n```"
    },
    {
        "role": "assistant",
        "content": "To obtain the bounding boxes of recognized words using `python-tesseract`, you can utilize the `image_to_data` function provided by the `pytesseract` library, which is a more commonly used Python wrapper for Tesseract OCR. This function provides detailed information, including the bounding box for each word. Here's how you can modify your code to achieve this:\n\nFirst, ensure you have installed the `pytesseract` and `Pillow` libraries:\n\n```bash\npip install pytesseract pillow\n```\n\nHere's the modified code using `pytesseract`:\n\n```python\nfrom PIL import Image\nimport pytesseract\n\n# Load the image using PIL\nimage_path = 'test.jpg'\nimage = Image.open(image_path)\n\n# Use pytesseract to get detailed OCR information\nocr_data = pytesseract.image_to_data(image, lang='eng', output_type=pytesseract.Output.DICT)\n\n# Iterate over each word detected by tesseract\nn_boxes = len(ocr_data['level'])\nfor i in range(n_boxes):\n    (x, y, w, h) = (ocr_data['left'][i], ocr_data['top'][i], ocr_data['width'][i], ocr_data['height'][i])\n    word = ocr_data['text'][i]\n    print(f\"Word: {word}, Bounding Box: ({x}, {y}, {w}, {h})\")\n```\n\n### Key Points:\n- **`pytesseract.image_to_data`**: This function returns detailed information in the form of a dictionary including the text, bounding box coordinates, and other metadata.\n  \n- **Bounding Box**: The bounding box of each detected word is given by the `left`, `top`, `width`, and `height` keys in the returned dictionary.\n\n- **Iterating Over Words**: You can iterate over each detected word and access its bounding box along with the recognized text.\n\nThis will print each word along with its bounding box coordinates on the image. Adjust the `lang` parameter if you need to support different languages."
    }
]