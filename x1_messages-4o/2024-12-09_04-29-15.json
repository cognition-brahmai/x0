[
    {
        "role": "user",
        "content": "I am looking for a Python implementation of the Lower bound of Wilson score confidence interval for a Bernoulli parameter, as discussed in the article \"How Not to Sort by Average Rating\". Can anyone help?"
    },
    {
        "role": "assistant",
        "content": "Certainly! The Wilson score confidence interval is a method used to calculate a confidence interval for a proportion in a Bernoulli distribution. This is particularly useful for ranking items based on user reviews or ratings, as discussed in the article \"How Not to Sort by Average Rating.\"\n\nHere's a Python implementation to calculate the lower bound of the Wilson score confidence interval for a Bernoulli parameter:\n\n```python\nimport math\n\ndef wilson_score_lower_bound(pos, n, confidence=0.95):\n    if n == 0:\n        return 0\n    \n    z = {\n        0.80: 1.281551565545,\n        0.90: 1.644853626951,\n        0.95: 1.959963984540,\n        0.98: 2.326347874041,\n        0.99: 2.575829303549\n    }[confidence]\n    \n    phat = pos / n\n    denominator = 1 + z*z/n\n    centre_adjusted_probability = phat + z*z / (2*n)\n    adjusted_standard_deviation = math.sqrt((phat*(1-phat) + z*z / (4*n)) / n)\n    \n    lower_bound = (centre_adjusted_probability - z * adjusted_standard_deviation) / denominator\n    return lower_bound\n\n# Example usage\npositive_ratings = 50\ntotal_ratings = 100\nconfidence_level = 0.95\n\nlower_bound = wilson_score_lower_bound(positive_ratings, total_ratings, confidence_level)\nprint(f\"Lower bound of Wilson score confidence interval: {lower_bound}\")\n```\n\n### Explanation:\n- `pos` is the number of positive ratings.\n- `n` is the total number of ratings.\n- `confidence` is the confidence level for the interval. Common values are 0.80, 0.90, 0.95, 0.98, and 0.99.\n\nThis code calculates the lower bound of the Wilson score confidence interval for the given number of positive ratings and total ratings at a specified confidence level. The `z` value is determined based on the chosen confidence level from a predefined dictionary."
    }
]