[
    {
        "role": "user",
        "content": "I'm trying to setup postgres with the postgres mac app, but I'm encountering an error. The error message states \"ImportError: dlopen(/Users/Craig/pyenv/mysite/lib/python2.7/site-packages/psycopg2/_psycopg.so, 2): Library not loaded: @executable_path/../lib/libssl.1.0.0.dylib. Referenced from: /Applications/Postgres.app/Contents/MacOS/lib/libpq.dylib. Reason: image not found\". How can I resolve this issue?"
    },
    {
        "role": "assistant",
        "content": "The error you're encountering is related to a missing SSL library that the psycopg2 package is trying to access. This is a common issue when there's a mismatch between the installed version of OpenSSL and the version expected by your Python environment or the Postgres app. Here's how you can resolve it:\n\n1. **Upgrade OpenSSL**: Make sure you have the latest version of OpenSSL installed. You can use Homebrew to install or upgrade OpenSSL:\n\n   ```bash\n   brew update\n   brew install openssl\n   ```\n\n2. **Link OpenSSL**: Ensure that the OpenSSL libraries are correctly linked. You might need to force link them:\n\n   ```bash\n   brew link --force openssl\n   ```\n\n3. **Reinstall psycopg2**: You may need to reinstall psycopg2 so it can link against the correct version of SSL:\n\n   ```bash\n   pip uninstall psycopg2\n   pip install psycopg2\n   ```\n\n4. **Configure environment variables**: You might need to set environment variables to ensure the correct libraries are found. Add the following to your shell configuration file (e.g., `.bash_profile`, `.zshrc`):\n\n   ```bash\n   export LDFLAGS=\"-L/usr/local/opt/openssl/lib\"\n   export CPPFLAGS=\"-I/usr/local/opt/openssl/include\"\n   ```\n\n   After adding these lines, reload your shell configuration:\n\n   ```bash\n   source ~/.bash_profile\n   ```\n\n5. **Check the Python version**: Make sure you are using a compatible Python version (Python 3 is recommended). Python 2.7 is deprecated and may cause compatibility issues.\n\n6. **Use virtual environments**: Consider using a Python virtual environment to manage dependencies separately:\n\n   ```bash\n   python3 -m venv myenv\n   source myenv/bin/activate\n   pip install psycopg2\n   ```\n\nBy following these steps, you should be able to resolve the ImportError related to the missing SSL library. If the issue persists, ensure that all dependencies are correctly installed and consult the documentation for any specific configurations required for your setup."
    }
]