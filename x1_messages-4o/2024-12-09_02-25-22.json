[
    {
        "role": "user",
        "content": "I recently updated to the newest stable release of matplotlib (1.5.1). Now, every time I import matplotlib, I encounter a message: \"/usr/local/lib/python2.7/dist-packages/matplotlib/font_manager.py:273: UserWarning: Matplotlib is building the font cache using fc-list. This may take a moment. warnings.warn('Matplotlib is building the font cache using fc-list. This may take a moment.')\". Following this, it always stalls for a few seconds. Is this the expected behavior? Was it the same before the update, but without the message being displayed?"
    },
    {
        "role": "assistant",
        "content": "The message you're seeing is related to the process of building the font cache in Matplotlib. When Matplotlib is first imported or when new fonts are detected, it scans the available fonts on your system and builds a cache to speed up future font lookups. This process is necessary to ensure that Matplotlib can efficiently render text with the correct fonts.\n\nWith the update to Matplotlib 1.5.1, the developers decided to add a warning message to inform users that this font cache building process is occurring. This process might have been happening in previous versions as well, but without the explicit warning message being shown. The delay you're experiencing is due to the time it takes to scan and cache the fonts, which can vary depending on the number of fonts installed on your system.\n\nTo potentially reduce the delay:\n\n1. **Persist the Font Cache**: Ensure that the font cache is being saved properly. This is typically stored in the user's home directory under a `.cache` or similar directory. Verify that you have write permissions to this directory.\n\n2. **Update Fontconfig**: Make sure you have the latest version of `fontconfig` installed on your system, as it can improve the efficiency of the font cache building process.\n\n3. **Clean Up Fonts**: If you have a large number of fonts installed, consider cleaning up any unnecessary fonts, as this can reduce the time taken to build the cache.\n\n4. **Environment Variables**: You can set environment variables to change the behavior of Matplotlib, such as specifying a different font cache directory.\n\nThis delay should only occur the first time you import Matplotlib after an update or when new fonts are added. Once the cache is built, subsequent imports should be faster."
    }
]