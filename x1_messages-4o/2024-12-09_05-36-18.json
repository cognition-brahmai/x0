[
    {
        "role": "user",
        "content": "I am trying to embed Plotly graphs in Sphinx documentation using nbsphinx. I have a Jupyter notebook with Plotly plots which appear perfectly in the notebook. However, when I try to embed them in the documentation, the plots do not appear. I am looking to create a page similar to the one in this [link](https://plot.ly/python/ipython-notebook-tutorial), where interactive plots made with Plotly are displayed in Jupyter notebook style in and out blocks. I know I could include them as images but I am hoping for a solution that allows for interactivity of the plots. How can I successfully embed interactive Plotly graphs in Sphinx documentation using nbsphinx?"
    },
    {
        "role": "assistant",
        "content": "Embedding interactive Plotly graphs in Sphinx documentation using nbsphinx can be a bit tricky, but it's definitely achievable. Here are some steps and tips to help you get the interactive plots working:\n\n1. **Ensure Plotly is Set Up for Offline Use**:\n   Plotly can be used offline, which is crucial for embedding in documentation. Make sure you've set it up correctly in your Jupyter notebook:\n\n   ```python\n   import plotly.io as pio\n   pio.renderers.default = 'notebook'\n   ```\n\n   Alternatively, you can use 'plotly_mimetype' as the renderer, which is often more compatible with Sphinx:\n\n   ```python\n   pio.renderers.default = 'plotly_mimetype'\n   ```\n\n2. **Check `nbsphinx` and Plotly Versions**:\n   Make sure you are using compatible versions of `nbsphinx`, Plotly, and Jupyter. Sometimes, issues arise from version incompatibilities.\n\n3. **Sphinx Configuration**:\n   Ensure that your `conf.py` file for Sphinx is set up to handle JavaScript and CSS for Plotly. You might need to add custom JavaScript and CSS files to your `_static` directory and include them in your configuration:\n\n   ```python\n   def setup(app):\n       app.add_js_file('https://cdn.plot.ly/plotly-latest.min.js')\n   ```\n\n4. **Using nbsphinx with Plotly**:\n   nbsphinx can render Jupyter notebooks, but sometimes additional configuration is needed to ensure interactive elements like Plotly plots are displayed. Make sure your notebook cells are not using features that are unsupported by `nbsphinx`.\n\n5. **Build and Serve**:\n   After ensuring the above setups, try building your Sphinx documentation again using:\n\n   ```bash\n   make html\n   ```\n\n   Then, serve the documentation using a simple HTTP server to make sure everything loads correctly:\n\n   ```bash\n   cd _build/html\n   python -m http.server\n   ```\n\n6. **Troubleshoot with DevTools**:\n   If the plots still don't display, debug using your browser's developer tools. Check for any JavaScript errors or issues in loading resources.\n\n7. **Consider Alternative Renderers**:\n   If you still face issues, consider using an alternative renderer that might be more compatible with your setup. Test with `'png'` or `'svg'` to see if they work, albeit without interactivity.\n\nBy following these steps, you should be able to embed interactive Plotly plots in your Sphinx-generated documentation using nbsphinx. If you continue to face issues, consider consulting the documentation for each tool or seeking community support, as there might be specific bugs or limitations affecting your setup."
    }
]