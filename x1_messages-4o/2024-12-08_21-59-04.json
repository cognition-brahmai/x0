[
    {
        "role": "user",
        "content": "As a detective, you have come across a social media post promoting a new movie, but the post is encrypted in JSON format. Can you use your Swift programming skills to decode the information and retrieve the movie's title, description, image URL, trailer URL, and release date? \nHere is the encrypted JSON format:\n{\n    \"movie\": {\n        \"title\": \"rOYALTY\",\n        \"description\": \"In a world where everyone is fighting to be on top, who will come out as the ultimate royalty?\",\n        \"image_url\": \"https://example.com/royalty.jpg\",\n        \"trailer_url\": \"https://example.com/royalty_trailer.mp4\",\n        \"release_date\": \"2022-05-27\"\n    }\n}\nCan you write the Swift code to decrypt the JSON and extract the movie's information? Remember, every detail is crucial in solving the case. Good luck, detective!"
    },
    {
        "role": "assistant",
        "content": "Certainly! To decode the JSON data and extract the movie's information using Swift, you can use the `Codable` protocol. Here's how you can accomplish this:\n\n```swift\nimport Foundation\n\n// Define the structure of the JSON data\nstruct Movie: Codable {\n    let title: String\n    let description: String\n    let imageUrl: String\n    let trailerUrl: String\n    let releaseDate: String\n\n    // Map the JSON keys to the struct properties\n    enum CodingKeys: String, CodingKey {\n        case title\n        case description\n        case imageUrl = \"image_url\"\n        case trailerUrl = \"trailer_url\"\n        case releaseDate = \"release_date\"\n    }\n}\n\nstruct MovieData: Codable {\n    let movie: Movie\n}\n\n// JSON string\nlet jsonString = \"\"\"\n{\n    \"movie\": {\n        \"title\": \"rOYALTY\",\n        \"description\": \"In a world where everyone is fighting to be on top, who will come out as the ultimate royalty?\",\n        \"image_url\": \"https://example.com/royalty.jpg\",\n        \"trailer_url\": \"https://example.com/royalty_trailer.mp4\",\n        \"release_date\": \"2022-05-27\"\n    }\n}\n\"\"\"\n\n// Convert the JSON string to Data\nif let jsonData = jsonString.data(using: .utf8) {\n    do {\n        // Decode the JSON data into the MovieData structure\n        let movieData = try JSONDecoder().decode(MovieData.self, from: jsonData)\n\n        // Access the movie details\n        let movie = movieData.movie\n        print(\"Title: \\(movie.title)\")\n        print(\"Description: \\(movie.description)\")\n        print(\"Image URL: \\(movie.imageUrl)\")\n        print(\"Trailer URL: \\(movie.trailerUrl)\")\n        print(\"Release Date: \\(movie.releaseDate)\")\n    } catch {\n        print(\"Error decoding JSON: \\(error)\")\n    }\n} else {\n    print(\"Error converting JSON string to Data.\")\n}\n```\n\n### Explanation:\n\n1. **Structures**: We define a `Movie` struct to map the JSON keys to Swift properties. `MovieData` is a wrapper to handle the top-level \"movie\" key.\n\n2. **CodingKeys**: This enum is used to map JSON keys to properties when they don't match exactly.\n\n3. **JSON String**: The JSON string represents the encrypted data we want to decode.\n\n4. **Data Conversion**: Convert the JSON string to `Data` type.\n\n5. **Decoding**: Use `JSONDecoder` to decode the `jsonData` into the `MovieData` structure.\n\n6. **Accessing Data**: Once decoded, access the movie details and print them.\n\nBy using this Swift code, you decode the JSON structure and retrieve all the movie's information."
    }
]