[
    {
        "role": "user",
        "content": "I am having trouble making the description Markdown work in PyPi. I uploaded a package to PyPi using the following commands:\n```python\npython setup.py register -r pypi\npython setup.py sdist upload -r pypi\n```\nI tried to modify the description and wrote the following code:\n```python\n**my plugin**\n\nThis plugin enables you to ... For example:\n```python\n@attr(section='MySection', id=1)\ndef test_function(self):\n    \"\"\"\n    Bla bla bla\n    \"\"\"\n    pass\n```\n```\nHowever, the text appears without the markdown formatting. What could I be doing wrong?"
    },
    {
        "role": "assistant",
        "content": "When uploading a package to PyPi, the description in `setup.py` is often displayed on the PyPi project page, and it doesn\u2019t automatically render markdown unless you specify it. Here are some steps you can take to ensure your markdown description is rendered correctly:\n\n1. **Specify the Content Type:**\n   In your `setup.py`, ensure that you specify the content type for your long description. You can do this by adding the `long_description_content_type` parameter. If you're using Markdown, it should be set to `'text/markdown'`.\n\n   ```python\n   from setuptools import setup\n\n   setup(\n       name='your-package-name',\n       version='0.1',\n       description='A brief description of your package',\n       long_description=open('README.md').read(),\n       long_description_content_type='text/markdown',  # This is essential\n       # other parameters\n   )\n   ```\n\n2. **Use `twine` for Uploading:**\n   Instead of using `python setup.py sdist upload`, which is deprecated, consider using `twine` to upload your package. Twine is a tool that helps you upload Python packages to PyPi and handles the content-type correctly.\n\n   First, ensure you have Twine installed:\n\n   ```bash\n   pip install twine\n   ```\n\n   Then, build your distribution:\n\n   ```bash\n   python setup.py sdist\n   ```\n\n   Finally, upload it using Twine:\n\n   ```bash\n   twine upload dist/*\n   ```\n\n3. **Check the README File:**\n   Make sure that your `README.md` (or whatever file you use for `long_description`) is correctly formatted and is a valid markdown file.\n\n4. **Verify on Test PyPi:**\n   Before uploading to the main PyPi repository, you can upload your package to Test PyPi to verify that everything displays correctly. You can do this by specifying the repository URL when using twine:\n\n   ```bash\n   twine upload --repository-url https://test.pypi.org/legacy/ dist/*\n   ```\n\n5. **Check PyPi Rendering:**\n   Sometimes, even if everything is correct, PyPi might have a temporary issue rendering markdown. After ensuring all steps are correct, give it some time and check again.\n\nBy following these steps, your package description should display correctly with markdown formatting on PyPi."
    }
]