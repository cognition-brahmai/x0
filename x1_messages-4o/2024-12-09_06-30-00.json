[
    {
        "role": "user",
        "content": "I am creating a Python package with a certain directory structure where I have a text file (`z.txt`) in one of the modules (`module1`). I want this file to be included when I install the package. I have added this file in `MANIFEST.in` and `setup.py`. However, when I do `python setup.py install`, I see only the Python files in `dist-packages/mypkg/module1` and not `z.txt`. I also tried adding the file as `data_files`, but it created a directory in `/usr/local`, whereas I want it inside the source code directory. How can I keep the text file (`z.txt`) in the correct location after `setup.py install`?"
    },
    {
        "role": "assistant",
        "content": "To ensure that your `z.txt` file is included within your package when it's installed, you need to use the `package_data` parameter in your `setup.py` file. This parameter is used to specify additional files that should be included within your package directories. Here's a step-by-step guide to achieve this:\n\n1. **Directory Structure**: Ensure your package directory structure looks something like this:\n\n   ```\n   mypkg/\n       setup.py\n       MANIFEST.in\n       mypkg/\n           __init__.py\n           module1/\n               __init__.py\n               z.txt\n   ```\n\n2. **MANIFEST.in**: This file is used for specifying files to include in the source distribution. Add the following line to ensure `z.txt` is included in the source distribution:\n\n   ```\n   recursive-include mypkg/module1 *.txt\n   ```\n\n3. **setup.py**: Modify your `setup.py` to use the `package_data` parameter. Here is an example of what it should look like:\n\n   ```python\n   from setuptools import setup, find_packages\n\n   setup(\n       name='mypkg',\n       version='0.1',\n       packages=find_packages(),\n       include_package_data=True,  # This is important\n       package_data={\n           'mypkg.module1': ['z.txt'],  # Specify the package and the file(s) to include\n       },\n       # other parameters like author, description, etc.\n   )\n   ```\n\n4. **Include `include_package_data=True`**: Ensure that you have `include_package_data=True` in your `setup.py`. This tells setuptools to include package data specified in `package_data` or in `MANIFEST.in`.\n\n5. **Reinstall the package**: After making these changes, reinstall your package using:\n   \n   ```bash\n   python setup.py install\n   ```\n\nBy following these steps, your `z.txt` file should be included within the `module1` directory of your installed package. This approach ensures that additional non-Python files are treated as part of the package data and are installed in the same directory structure as your source files."
    }
]