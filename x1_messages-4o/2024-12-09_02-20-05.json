[
    {
        "role": "user",
        "content": "How can I send a form array to Flask from an HTML form with multiple inputs? I have the input names defined as follows:\n```\n<input name=\"hello[]\" type=\"text\" />\n<input name=\"hello[]\" type=\"text\" />\n<input name=\"hello[]\" type=\"text\" />\n```\nIn PHP, this is received as an array, but I'm unsure if the process is the same in Python using Flask. I have tried the following code:\n```\nhello = request.form['hello']\nprint(hello)\n```\nHowever, this resulted in a '400 Bad Request' error which stated that 'The browser (or proxy) sent a request that this server could not understand.' How can I successfully send this form array to Flask?"
    },
    {
        "role": "assistant",
        "content": "In Flask, when you have form inputs with the same name (like your `hello[]` inputs), you can retrieve the values as a list using `request.form.getlist()`. The `getlist()` method will gather all the values associated with the given key into a list. Here's how you can modify your code to handle this:\n\n1. Ensure that your form is correctly set to use the POST method and is sent to the correct route in your Flask app.\n2. Use `request.form.getlist('hello[]')` to retrieve the values.\n\nHere's an example of how you can set this up:\n\n### HTML Form\nMake sure your form is correctly structured to point to a Flask route that expects a POST request:\n\n```html\n<form method=\"POST\" action=\"/submit-form\">\n    <input name=\"hello[]\" type=\"text\" />\n    <input name=\"hello[]\" type=\"text\" />\n    <input name=\"hello[]\" type=\"text\" />\n    <button type=\"submit\">Submit</button>\n</form>\n```\n\n### Flask Application\nEnsure that your Flask application has the appropriate route set up to handle the incoming form data:\n\n```python\nfrom flask import Flask, request, render_template_string\n\napp = Flask(__name__)\n\n@app.route('/submit-form', methods=['POST'])\ndef submit_form():\n    # Retrieve the list of values\n    hello_values = request.form.getlist('hello[]')\n    \n    # Print the list to the console or handle it as needed\n    print(hello_values)\n    \n    # Return a response to the client\n    return \"Form submitted successfully with values: \" + ', '.join(hello_values)\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n### Explanation\n\n- **HTML Form**: The form should have the correct `action` attribute pointing to the Flask route and use the `POST` method.\n- **Flask Route**: In the `/submit-form` route, `request.form.getlist('hello[]')` retrieves all the values for the input with the name `hello[]` as a list. You can then process these values as needed.\n\nThis setup should resolve the '400 Bad Request' error and allow you to handle the array of input values from your HTML form in Flask."
    }
]