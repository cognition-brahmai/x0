[
    {
        "role": "user",
        "content": "How can I rotate the X-axis labels in my Bokeh figure to 45 degrees and create space for them so they are readable and not overlapping each other? I am using Bokeh to create a bar chart with rectangles and my current graph looks a little rough around the edges. Here is the code that I have used:\n\n```python\nx_length = var_results.index * 5.5\n\nnames = var_results.Feature.tolist()\ny_length = var_results.Variance\ny_center = var_results.Variance/2\n\nr = figure(x_range = names, \n           y_range = (-0.05,.3), \n           active_scroll = 'wheel_zoom', \n           x_axis_label = 'Features', \n           y_axis_label = 'Variance')\n\nr.rect(x_length, \n       y_center, \n       width=1, \n       height=y_length, \n       color = \"#ff1200\")\noutput_notebook()\nshow(r)\n```\n`var_results` is a Pandas dataframe with a sequential, non-repeating index, a column `Features` containing non-repeated names, and a column `Variance` which is dtype float."
    },
    {
        "role": "assistant",
        "content": "To rotate the X-axis labels in your Bokeh figure to 45 degrees and create space for them, you can use the `r.xaxis.major_label_orientation` property to set the rotation angle. Additionally, you can adjust the figure's width or the `x_range` padding to create more space for the labels. Here's how you can modify your existing code to achieve this:\n\n```python\nfrom bokeh.plotting import figure, output_notebook, show\nfrom bokeh.models import Range1d\n\n# Assuming var_results is already defined and available\nx_length = var_results.index * 5.5\n\nnames = var_results.Feature.tolist()\ny_length = var_results.Variance\ny_center = var_results.Variance / 2\n\nr = figure(x_range=names,\n           y_range=(-0.05, 0.3),\n           active_scroll='wheel_zoom',\n           x_axis_label='Features',\n           y_axis_label='Variance',\n           plot_width=800)  # Increase plot width for more space\n\nr.rect(x_length,\n       y_center,\n       width=1,\n       height=y_length,\n       color=\"#ff1200\")\n\n# Rotate x-axis labels\nr.xaxis.major_label_orientation = 0.785  # 0.785 radians is approximately 45 degrees\n\n# Optionally adjust x_range to create more space\nr.x_range.range_padding = 0.1\n\noutput_notebook()\nshow(r)\n```\n\nKey Points:\n\n1. **Rotation**: The `r.xaxis.major_label_orientation` property is used to rotate the labels. The value is in radians, where 0.785 radians is approximately equal to 45 degrees.\n\n2. **Width and Padding**: By increasing the `plot_width`, you provide more space for the labels. Additionally, setting `x_range.range_padding` helps to add some padding around the X-axis range, ensuring the labels don't overlap the figure edges.\n\n3. **Ensure Compatibility**: Make sure that your `x_length` aligns correctly with the `x_range` values. Since `x_range` is based on the `names`, ensure `x_length` corresponds correctly to each name.\n\nThese adjustments should help make your plot more readable and give it a cleaner appearance."
    }
]