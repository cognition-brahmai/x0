[
    {
        "role": "user",
        "content": "How can I load session and cookies from Selenium browser to requests library in Python? I have written a code that attempts to do so, but it is generating a TypeError indicating that list indices must be integers, not dict. Here's the code:\n\n```\nimport requests\n\ncookies = [{u'domain': u'academics.vit.ac.in',\n            u'name': u'ASPSESSIONIDAEQDTQRB',\n            u'value': u'ADGIJGJDDGLFIIOCEZJHJCGC',\n            u'expiry': None, u'path': u'/',\n            u'secure': True}]\nresponse = requests.get(url2, cookies=cookies)\n```\n\nAnd here's the exception I am encountering:\n\n```\nTraceback (most recent call last):\n  File \"F:\\PYTHON\\python_scripts\\cookies\\cookies3.py\", line 23, in <module>\n    response = requests.get(url2, cookies=cookies)\n  File \"C:\\Python27\\lib\\site-packages\\requests\\api.py\", line 68, in get\n    return request('get', url, **kwargs)<br/>\n  File \"C:\\Python27\\lib\\site-packages\\requests\\sessions.py\", line 450, in request\n    prep = self.prepare_request(req)\n    cookies = cookiejar_from_dict(cookies)\n  File \"C:\\Python27\\lib\\site-packages\\requests\\cookies.py\", line 439, in cookiejar_from_dict\n    cookiejar.set_cookie(create_cookie(name, cookie_dict[name]))\nTypeError: list indices must be integers, not dict\n```"
    },
    {
        "role": "assistant",
        "content": "The error you're encountering is because the `requests` library expects the `cookies` parameter to be a dictionary, where the keys are the cookie names and the values are the cookie values. However, in your code, you're passing a list of dictionaries representing cookies, which is not the correct format.\n\nTo fix this, you need to convert your list of cookie dictionaries into a single dictionary. Here's how you can do it:\n\n```python\nimport requests\n\n# Convert the list of dictionaries into a single dictionary\ncookies_list = [{u'domain': u'academics.vit.ac.in',\n                 u'name': u'ASPSESSIONIDAEQDTQRB',\n                 u'value': u'ADGIJGJDDGLFIIOCEZJHJCGC',\n                 u'expiry': None, u'path': u'/',\n                 u'secure': True}]\n\n# Create a dictionary for cookies\ncookies = {cookie['name']: cookie['value'] for cookie in cookies_list}\n\nurl2 = \"http://example.com\"  # Replace with your actual URL\n\n# Make the request with the correctly formatted cookies\nresponse = requests.get(url2, cookies=cookies)\n\nprint(response.content)\n```\n\nThis code snippet converts the list of dictionaries into a single dictionary where each key-value pair corresponds to a cookie name and its value. Now, the `requests.get()` function should work without errors. Make sure to replace `\"http://example.com\"` with your actual URL."
    }
]