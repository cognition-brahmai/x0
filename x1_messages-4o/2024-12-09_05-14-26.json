[
    {
        "role": "user",
        "content": "I am generating a plot with two y-axes using the `twinx()` function in Python. I am also assigning labels to the lines and want to display them using the `legend()` function. However, only the labels from the first axis are appearing in the legend, and the label 'temp' from the second axis is not included. How do I add this third label to the legend? Here is the code I am currently using:\n\n```python\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib import rc\nrc('mathtext', default='regular')\n\nfig = plt.figure()\nax = fig.add_subplot(111)\nax.plot(time, Swdown, '-', label = 'Swdown')\nax.plot(time, Rn, '-', label = 'Rn')\nax2 = ax.twinx()\nax2.plot(time, temp, '-r', label = 'temp')\nax.legend(loc=0)\nax.grid()\nax.set_xlabel(\"Time (h)\")\nax.set_ylabel(r\"Radiation ($MJ\\,m^{-2}\\,d^{-1}$)\")\nax2.set_ylabel(r\"Temperature ($^\\circ$C)\")\nax2.set_ylim(0, 35)\nax.set_ylim(-20,100)\nplt.show()\n```"
    },
    {
        "role": "assistant",
        "content": "To include the label from the second y-axis in the legend, you need to manually combine the handles and labels from both `ax` and `ax2` before calling the `legend()` function. Here's how you can modify your code to achieve this:\n\n```python\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib import rc\nrc('mathtext', default='regular')\n\nfig = plt.figure()\nax = fig.add_subplot(111)\nline1, = ax.plot(time, Swdown, '-', label='Swdown')\nline2, = ax.plot(time, Rn, '-', label='Rn')\nax2 = ax.twinx()\nline3, = ax2.plot(time, temp, '-r', label='temp')\n\n# Collect handles and labels from both axes\nlines = [line1, line2, line3]\nlabels = [line.get_label() for line in lines]\n\n# Create a combined legend\nax.legend(lines, labels, loc=0)\n\nax.grid()\nax.set_xlabel(\"Time (h)\")\nax.set_ylabel(r\"Radiation ($MJ\\,m^{-2}\\,d^{-1}$)\")\nax2.set_ylabel(r\"Temperature ($^\\circ$C)\")\nax2.set_ylim(0, 35)\nax.set_ylim(-20, 100)\nplt.show()\n```\n\nIn this updated code, `line1`, `line2`, and `line3` are assigned the individual line objects returned by the `plot()` function. These line objects are then used to gather both handles and labels, which are passed to the `legend()` function to display all the labels, including those from the second y-axis."
    }
]