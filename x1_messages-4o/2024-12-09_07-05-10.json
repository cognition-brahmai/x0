[
    {
        "role": "user",
        "content": "I am using Jinja2 as the template engine for a static HTML site that is generated through a Python script. I am trying to repeat the content of a block in the layout template, but I am getting a TemplateAssertionError that says \"block 'title' defined twice\". How can I repeat the content of a block in the same template using Jinja2?\n\nCode:\n```html\n<html>\n<head>\n    <title>{% block title %}{% endblock %} - {{ sitename }}</title>\n</head>\n<body>\n    <h1>{% block title %}{% endblock %}</h1>\n    <div id=\"content\">\n        {% block content %}{% endblock %}\n    </div>\n</body>\n</html>\n\n{% extends \"layout.html\" %}\n{% block title %}Page title{% endblock %}\n{% block content %}\nHere goes the content\n{% endblock %}\n```\n\nError:\n```\njinja2.exceptions.TemplateAssertionError: block 'title' defined twice\n```"
    },
    {
        "role": "assistant",
        "content": "The error you're encountering is because you're trying to define the same block `title` twice in the same context, which Jinja2 doesn't allow. In Jinja2, each block should be defined once per inheritance chain. However, you can reference a block's content multiple times using variables or by using the `super()` function.\n\nTo resolve this issue, you can use a variable to store the block content and then reuse it wherever needed within the template.\n\nHere's a possible solution:\n\n1. Define a variable in the parent template to hold the block content.\n2. Use the `super()` function to reference the content of the block from the child template.\n\nHere's how you can achieve that:\n\n**layout.html**:\n```html\n<html>\n<head>\n    <title>{{ title }} - {{ sitename }}</title>\n</head>\n<body>\n    <h1>{{ title }}</h1>\n    <div id=\"content\">\n        {% block content %}{% endblock %}\n    </div>\n</body>\n</html>\n```\n\n**child_template.html** (or whatever your child template file is named):\n```html\n{% extends \"layout.html\" %}\n\n{% block content %}\n{% set title = \"Page title\" %}\n{{ super() }}\nHere goes the content\n{% endblock %}\n```\n\nIn this setup:\n- The `title` variable is set once in the `content` block of the child template.\n- The `{{ title }}` variable is used in the parent `layout.html` template to display the title both in the `<title>` tag and the `<h1>` tag.\n\nThis approach eliminates the need to define the `title` block twice and allows you to easily update and reuse the block's content."
    }
]