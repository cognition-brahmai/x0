[
    {
        "role": "user",
        "content": "I am trying to wrap the text for long labels in my matplotlib chart. I have imported an array from a CSV for yticklabels using the `pyplot.setp()` method and I'm using `tight_layout()` for the formatting. However, the labels are exceptionally long and I would like them to transfer to newlines after a certain fixed width. Is there a way to wrap these long y labels to newlines easily? Here is my current code:\n\n```python\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nlabels=('Really really really really really really long label 1', 'Really really really really really really long label 2', 'Really really really really really really long label 3')\nvalues=(30,50,40)\n\nfig = plt.figure()\nax=fig.add_subplot(111)\n\nplt.ylim((0,40))\nfor i in np.arange(3):\n    plt.barh(15*i, values[i])\n\nplt.yticks(15*np.arange(3))\nplt.setp(ax.set_yticklabels(labels))\n\nplt.tight_layout()\nplt.show()\n```\nThe resulting plot has labels that extend out of the figure. How can I fix this?"
    },
    {
        "role": "assistant",
        "content": "To wrap long y-axis labels into multiple lines in a Matplotlib chart, you can use Python's textwrap module to automatically break the labels into shorter segments. Here's how you can achieve this by modifying your current code:\n\n```python\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport textwrap\n\n# Function to wrap labels\ndef wrap_labels(labels, width):\n    return ['\\n'.join(textwrap.wrap(label, width)) for label in labels]\n\nlabels = ('Really really really really really really long label 1', \n          'Really really really really really really long label 2', \n          'Really really really really really really long label 3')\nvalues = (30, 50, 40)\n\n# Wrap the labels to a fixed width, e.g., 20 characters\nwrapped_labels = wrap_labels(labels, 20)\n\nfig = plt.figure()\nax = fig.add_subplot(111)\n\nplt.ylim((0, 40))\nfor i in np.arange(3):\n    plt.barh(15*i, values[i])\n\n# Set wrapped labels\nplt.yticks(15*np.arange(3))\nplt.setp(ax.set_yticklabels(wrapped_labels))\n\nplt.tight_layout()\nplt.show()\n```\n\nIn this code snippet, the `wrap_labels` function uses `textwrap.wrap()` to break each label into a list of lines, each having a maximum width of the specified number of characters. The `\\n.join()` method then joins these lines with newline characters, effectively creating a multi-line string that Matplotlib can display. Adjust the `width` parameter in the `wrap_labels` function call to control how many characters each line will have before wrapping."
    }
]