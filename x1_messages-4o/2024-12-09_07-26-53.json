[
    {
        "role": "user",
        "content": "I am attempting to upload my Python project that utilizes Psycopg2 to Amazon Elastic Beanstalk via a zip file containing my project and a requirements.txt file. However, I am encountering the following error:\n\n```\nDownloading/unpacking psycopg2>=2.4.6 (from -r /opt/python/ondeck/app/requirements.txt (line 3)) \nRunning setup.py egg_info for package psycopg2\nError: pg_config executable not found.\n\nPlease add the directory containing pg_config to the PATH\nor specify the full executable path with the option:\npython setup.py build_ext --pg-config /path/to/pg_config build ...\nor with the pg_config option in 'setup.cfg'.\nComplete output from command python setup.py egg_info:\nrunning egg_info\n```\n\nHow can I resolve this issue on Amazon Elastic Beanstalk?"
    },
    {
        "role": "assistant",
        "content": "The error you're encountering is because Psycopg2, a PostgreSQL adapter for Python, requires the `pg_config` executable to be available in order to compile the native extensions. This executable is typically part of the PostgreSQL development package, which is not installed by default on Amazon Elastic Beanstalk instances. To resolve this issue, you need to install the necessary PostgreSQL development libraries on your Elastic Beanstalk environment. Here's how you can do it:\n\n1. **Create a `.ebextensions` directory**: In the root of your project, create a directory named `.ebextensions`.\n\n2. **Add a configuration file**: Inside the `.ebextensions` directory, add a configuration file with a `.config` extension, for example, `01_packages.config`. This file will contain the commands to install the necessary packages.\n\n3. **Edit the configuration file**: Add the following content to the `01_packages.config` file to install the PostgreSQL development packages:\n\n   ```yaml\n   packages:\n     yum:\n       postgresql-devel: []\n   ```\n\n   This configuration tells Elastic Beanstalk to use the `yum` package manager to install the `postgresql-devel` package, which provides the `pg_config` executable needed by Psycopg2.\n\n4. **Re-upload your application**: Once you've added the `.ebextensions` directory and configuration file, zip your project again and upload it to Elastic Beanstalk.\n\n5. **Deploy your application**: Deploy the updated application to your Elastic Beanstalk environment. The environment will use the `01_packages.config` file to install the necessary development libraries before installing your Python dependencies.\n\nBy including the `postgresql-devel` package installation in your deployment configuration, you ensure that `pg_config` is available when Psycopg2 is being installed, resolving the error you encountered."
    }
]