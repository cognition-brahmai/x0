[
    {
        "role": "user",
        "content": "In IPython, how can I create a figure in a file using `pylab.savefig` without displaying it within the IPython notebook? When I call `pylab.savefig(\"test.png\")`, the current figure gets displayed in addition to being saved in `test.png`. This becomes undesirable when automating the creation of a large set of plot files or when an intermediate file for external processing by another app is desired. I am unclear on how `IPython` and `matplotlib.pylab` interact in this regard. Is this a `matplotlib` or `IPython` notebook issue?"
    },
    {
        "role": "assistant",
        "content": "When working with IPython notebooks (now Jupyter notebooks) and `matplotlib`, it's common to encounter situations where plots are displayed automatically. This is because the notebook is set up to automatically display any figures that are created. However, if you want to save a figure to a file without displaying it, you can manage this behavior by using a non-interactive backend or by explicitly controlling the display.\n\nHere\u2019s how you can achieve this:\n\n1. **Use a Non-Interactive Backend:**\n   You can switch to a non-interactive backend, which prevents the figures from being displayed automatically. This is particularly useful when you want to generate plots without showing them on the screen.\n\n   ```python\n   import matplotlib\n   matplotlib.use('Agg')  # Use 'Agg' backend for non-interactive plotting\n\n   import matplotlib.pyplot as plt\n\n   plt.figure()\n   plt.plot([1, 2, 3], [4, 5, 6])\n   plt.savefig(\"test.png\")\n   plt.close()  # Close the figure to free up resources\n   ```\n\n2. **Suppress Inline Display in Jupyter Notebooks:**\n   If you\u2019re using the `%matplotlib inline` magic command, which is common in notebooks, you can switch to `%matplotlib agg` or `%matplotlib notebook` to manage how figures are displayed.\n\n   ```python\n   %matplotlib agg  # or use %matplotlib notebook\n\n   import matplotlib.pyplot as plt\n\n   plt.figure()\n   plt.plot([1, 2, 3], [4, 5, 6])\n   plt.savefig(\"test.png\")\n   plt.close()\n   ```\n\n3. **Explicitly Control Display:**\n   If you prefer to stick with the default settings, you can explicitly close the figure after saving it to prevent it from being displayed.\n\n   ```python\n   import matplotlib.pyplot as plt\n\n   plt.figure()\n   plt.plot([1, 2, 3], [4, 5, 6])\n   plt.savefig(\"test.png\")\n   plt.close()  # This prevents the figure from being shown\n   ```\n\nBy using any of these methods, you should be able to generate and save figures to files without displaying them in your IPython or Jupyter notebook sessions."
    }
]