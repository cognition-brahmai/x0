[
    {
        "role": "user",
        "content": "How can I use Django templates in my Python code without building a full Django-based web site and without having to set the DJANGO_SETTINGS_MODULE environment variable? When I try to import Django template and run the code below:\n\n```python\nimport django.template\nfrom django.template import Template, Context\nt = Template('My name is {{ my_name }}.')\n```\n\nI encounter an ImportError stating that \"Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined.\" How can I solve this?"
    },
    {
        "role": "assistant",
        "content": "If you want to use Django templates without setting up a full Django project or defining `DJANGO_SETTINGS_MODULE`, you can manually configure Django settings in your script. Here\u2019s how you can achieve this:\n\n1. **Install Django**: Ensure you have Django installed in your environment. You can do this using pip:\n\n   ```bash\n   pip install django\n   ```\n\n2. **Configure Settings Manually**: You can configure the necessary settings manually in your script. Here\u2019s an example of how to do this:\n\n   ```python\n   import django\n   from django.conf import settings\n   from django.template import Template, Context\n\n   # Manually configure Django settings\n   settings.configure(\n       TEMPLATES=[\n           {\n               'BACKEND': 'django.template.backends.django.DjangoTemplates',\n               'DIRS': [],\n               'APP_DIRS': True,\n               'OPTIONS': {\n                   'context_processors': [],\n               },\n           },\n       ],\n   )\n\n   # Initialize Django\n   django.setup()\n\n   # Create a Django template and context\n   template_string = 'My name is {{ my_name }}.'\n   t = Template(template_string)\n   c = Context({'my_name': 'John Doe'})\n\n   # Render the template with the context\n   rendered_string = t.render(c)\n   print(rendered_string)\n   ```\n\n3. **Explanation**:\n\n   - **Settings Configuration**: Instead of using `DJANGO_SETTINGS_MODULE`, we directly configure the settings using `settings.configure()`. This is sufficient for basic template usage without a full Django project.\n   \n   - **Template Configuration**: The `TEMPLATES` setting is configured to tell Django how to handle templates. This simple configuration works for rendering templates directly.\n   \n   - **Django Setup**: `django.setup()` is called to initialize the Django environment with the provided settings.\n\n4. **Run the Script**: After setting up the script as shown above, you can run it, and it should output:\n\n   ```\n   My name is John Doe.\n   ```\n\nThis approach allows you to use Django's templating system in standalone scripts without the overhead of a full Django project setup."
    }
]