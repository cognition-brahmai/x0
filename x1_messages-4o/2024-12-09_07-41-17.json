[
    {
        "role": "user",
        "content": "I have a DataFrame which I have grouped using 'sum()' on the basis of 'Code' and 'Month'. Now, I am struggling with creating a subplot of type 'bar' for each 'Code'. I want the x-axis to represent the 'Month' and the bars to represent 'ColA' and 'ColB'. How can I achieve this? Here is the code I have used and the DataFrame I have:\n\n```python\nimport pandas as pd\nimport numpy as np\n\nnp.random.seed(365)\nrows = 100\ndata = {'Month': np.random.choice(['2014-01', '2014-02', '2014-03', '2014-04'], size=rows),\n        'Code': np.random.choice(['A', 'B', 'C'], size=rows),\n        'ColA': np.random.randint(5, 125, size=rows),\n        'ColB': np.random.randint(0, 51, size=rows),}\ndf = pd.DataFrame(data)\ndfg = df.groupby(['Code', 'Month']).sum()\n```"
    },
    {
        "role": "assistant",
        "content": "To create a subplot of type 'bar' for each 'Code' where the x-axis represents the 'Month' and the bars represent 'ColA' and 'ColB', you can use the following approach using Matplotlib and Seaborn:\n\n1. First, make sure you have the necessary libraries installed. If not, you can install them using pip:\n   ```bash\n   pip install matplotlib seaborn\n   ```\n\n2. Use the following code to create the subplots:\n\n```python\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Reset the index of the grouped DataFrame to make 'Code' and 'Month' columns again\ndfg_reset = dfg.reset_index()\n\n# Get unique codes\ncodes = dfg_reset['Code'].unique()\n\n# Set up the matplotlib figure\nfig, axes = plt.subplots(nrows=len(codes), ncols=1, figsize=(10, 5 * len(codes)), sharex=True)\n\n# Iterate over each code and create a subplot\nfor i, code in enumerate(codes):\n    ax = axes[i]\n    df_code = dfg_reset[dfg_reset['Code'] == code]\n\n    # Create a bar plot for 'ColA' and 'ColB'\n    df_code.plot(x='Month', y=['ColA', 'ColB'], kind='bar', ax=ax, stacked=False)\n\n    # Set title and labels\n    ax.set_title(f'Code: {code}')\n    ax.set_ylabel('Values')\n    ax.set_xlabel('Month')\n\n    # Set the x-ticks labels\n    ax.set_xticklabels(df_code['Month'], rotation=45)\n\n# Adjust layout\nplt.tight_layout()\n\n# Show the plot\nplt.show()\n```\n\n### Explanation:\n- **Data Preparation**: After grouping, the index is reset to make 'Code' and 'Month' accessible columns.\n- **Plotting**: For each unique 'Code', a separate subplot is created where 'Month' is on the x-axis, and 'ColA' and 'ColB' are plotted as bars.\n- **Layout Adjustments**: `plt.tight_layout()` is used to ensure the subplots do not overlap and are neatly arranged.\n\nThis script will generate a subplot for each 'Code', displaying the values of 'ColA' and 'ColB' per month."
    }
]