[
    {
        "role": "user",
        "content": "I've been using discord.py for my project and everything was running perfectly until I got an error out of nowhere. The error is: `TypeError: __new__() got an unexpected keyword argument 'deny_new'`. This error pops up in my PyCharm console. I haven't made any changes to my code recently, but I did try to host my bot on Heroku, which didn't go well. After that, my bot started acting up and I couldn't run it anymore. Also, it only seems to work on my test server but not any other servers. Does anyone know how to fix this error? Here's the traceback of the error and my code:\n\nTraceback (most recent call last):\n```\n  File \"C:/Users/danie/PyCharmProjects/skybot/skybotgaming.py\", line 21, in <module>\n    client.run('TOKEN')\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\client.py\", line 640, in run\n    return future.result()\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\client.py\", line 621, in runner\n    await self.start(*args, **kwargs)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\client.py\", line 585, in start\n    await self.connect(reconnect=reconnect)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\client.py\", line 499, in connect\n    await self._connect()\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\client.py\", line 463, in _connect\n    await self.ws.poll_event()\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\gateway.py\", line 471, in poll_event\n    await self.received_message(msg)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\gateway.py\", line 425, in received_message\n    func(data)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\state.py\", line 750, in parse_guild_create\n    guild = self._get_create_guild(data)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\state.py\", line 725, in _get_create_guild\n    guild._from_data(data)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\guild.py\", line 297, in _from_data\n    self._sync(guild)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\guild.py\", line 328, in _sync\n    self._add_channel(CategoryChannel(guild=self, data=c, state=self._state))\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\channel.py\", line 726, in __init__\n    self._update(guild, data)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\channel.py\", line 737, in _update\n    self._fill_overwrites(data)\n  File \"C:\\Users\\danie\\anaconda3\\envs\\discordbottest\\lib\\site-packages\\discord\\abc.py\", line 294, in _fill_overwrites\n    self._overwrites.append(_Overwrites(id=overridden_id, **overridden))\nTypeError: __new__() got an unexpected keyword argument 'deny_new'\n```\nHere's my code:\n```\nimport discord\nimport random\nfrom discord.ext import commands\nimport asyncio\nclient = commands.Bot(command_prefix='{')\nclient.remove_command('help')\n\n@client.event\nasync def on_ready():\n    print(\"Signed in\")\n\n@client.command()\nasync def dm(ctx):\n    await ctx.author.send(\"What up chump?\")\n\nclient.run('TOKEN')\n```"
    },
    {
        "role": "assistant",
        "content": "The error you're encountering, `TypeError: __new__() got an unexpected keyword argument 'deny_new'`, is often related to a mismatch between the version of your Discord.py library and the code expectations. This can happen if there are breaking changes between versions or if the library is being updated and your code is not compatible with the newer version.\n\nHere are a few steps you can take to resolve the issue:\n\n1. **Check the Discord.py Version:**\n   Make sure you are using a stable and compatible version of Discord.py. You can check the version by running:\n\n   ```bash\n   pip show discord.py\n   ```\n\n   If you are using a newer version that might be causing issues, you might want to downgrade to a previous stable version. For example:\n\n   ```bash\n   pip install discord.py==1.7.3\n   ```\n\n2. **Update Your Code:**\n   If downgrading is not an option, ensure your code is compatible with the changes in the newer version of Discord.py. Check the [Discord.py documentation](https://discordpy.readthedocs.io/en/stable/) or the [GitHub repository](https://github.com/Rapptz/discord.py) for any breaking changes or updates that might affect your code.\n\n3. **Clear Cache and Reinstall:**\n   Sometimes cached files might cause issues. Clear the cache and reinstall the package:\n\n   ```bash\n   pip uninstall discord.py\n   pip cache purge\n   pip install discord.py\n   ```\n\n4. **Check Other Dependencies:**\n   Ensure all other dependencies and libraries you are using are also up to date and compatible with the version of Discord.py you are using.\n\n5. **Check Your Environment:**\n   Make sure that the virtual environment you are using in PyCharm is the one where you have installed the correct version of Discord.py. Sometimes IDEs might point to a different environment.\n\n6. **Consult Community and Documentation:**\n   If the issue persists, consider consulting the Discord.py community on platforms like GitHub issues or Discord servers dedicated to Discord.py development. They might have encountered similar issues and could have a solution.\n\nBy following these steps, you should be able to identify and resolve the issue with the `__new__()` error. If you continue to face problems, feel free to provide more details, and I can assist further."
    }
]