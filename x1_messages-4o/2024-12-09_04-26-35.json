[
    {
        "role": "user",
        "content": "How can I plot only the upper or lower triangle of a heatmap in matplotlib? I have tried setting the upper/lower part of the matrix to None, but this only results in a black triangle. I've searched for \"matplotlib missing values\" but haven't found anything helpful. I want to create a heatmap representation of a correlation matrix using the imshow function, as in this example: [correlation matrix](https://yin.che.wisc.edu/images/ProteinMatrix.jpg)"
    },
    {
        "role": "assistant",
        "content": "To plot only the upper or lower triangle of a heatmap using Matplotlib, you can mask the unwanted part of the matrix using a boolean mask. This approach allows you to display only the desired triangle (upper or lower) while keeping the rest of the heatmap blank. Here's how you can do it:\n\n1. **Create your correlation matrix**: Start by creating a correlation matrix or any square matrix that you want to display.\n\n2. **Create a mask**: Use a boolean mask to hide the upper or lower triangle of the matrix.\n\n3. **Plot using `imshow`**: Apply the mask and plot the matrix using Matplotlib's `imshow` function.\n\nHere's a complete example:\n\n```python\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Example correlation matrix\ndata = np.random.rand(10, 10)\ncorr_matrix = np.corrcoef(data)\n\n# Create a mask for the upper triangle (including the diagonal)\nmask_upper = np.triu(np.ones_like(corr_matrix, dtype=bool))\n\n# Create a mask for the lower triangle (including the diagonal)\nmask_lower = np.tril(np.ones_like(corr_matrix, dtype=bool))\n\n# Plot only the lower triangle\nplt.figure(figsize=(8, 6))\nplt.title(\"Lower Triangle of Correlation Matrix\")\nplt.imshow(np.ma.masked_where(mask_upper, corr_matrix), cmap='coolwarm', vmin=-1, vmax=1)\nplt.colorbar()\nplt.show()\n\n# Plot only the upper triangle\nplt.figure(figsize=(8, 6))\nplt.title(\"Upper Triangle of Correlation Matrix\")\nplt.imshow(np.ma.masked_where(mask_lower, corr_matrix), cmap='coolwarm', vmin=-1, vmax=1)\nplt.colorbar()\nplt.show()\n```\n\n### Explanation\n\n- **Mask Creation**: `np.triu` and `np.tril` are used to create masks for the upper and lower triangles, respectively. The boolean mask will have `True` values for the elements that should be hidden.\n- **Mask Application**: `np.ma.masked_where()` is used to apply the mask to the correlation matrix. This function hides the specified elements.\n- **Plotting**: `imshow` is used to plot the masked matrix. The `cmap` argument specifies the color map, and `vmin` and `vmax` set the color scale limits, which can be adjusted based on your data.\n\nThis approach will help you display only the upper or lower triangle of your heatmap as desired."
    }
]