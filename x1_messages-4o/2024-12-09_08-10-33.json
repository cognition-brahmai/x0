[
    {
        "role": "user",
        "content": "I have installed CUDA 9.1+cudnn-9.1+opencv 3.4.0+caffe on my system. However, when I attempt to run the command `make all -j8` in the `caffe` directory, I encounter an error stating \"nvcc fatal : Unsupported gpu architecture 'compute_20'\". I tried the command `cmake -D CMAKE_BUILD_TYPE=RELEASE -D CUDA_GENERATION=Kepler ..` to solve the issue but it still didn't work. How can I resolve this?"
    },
    {
        "role": "assistant",
        "content": "The error \"nvcc fatal : Unsupported gpu architecture 'compute_20'\" occurs because CUDA 9.1 no longer supports the 'compute_20' architecture, which corresponds to older NVIDIA GPUs. To resolve this issue, you can modify the build configuration files to exclude unsupported architectures. Here\u2019s how you can fix it:\n\n1. **Modify Makefile.config:**\n   - Open the `Makefile.config` file in the root of the Caffe directory.\n   - Look for the line with `CUDA_ARCH` and ensure it only includes supported architectures. You can remove or comment out any references to `compute_20`.\n\n   Example:\n   ```make\n   CUDA_ARCH := -gencode arch=compute_30,code=sm_30 \\\n                -gencode arch=compute_35,code=sm_35 \\\n                -gencode arch=compute_50,code=sm_50 \\\n                -gencode arch=compute_52,code=sm_52 \\\n                -gencode arch=compute_60,code=sm_60 \\\n                -gencode arch=compute_61,code=sm_61 \\\n                -gencode arch=compute_70,code=sm_70 \\\n                -gencode arch=compute_75,code=sm_75\n   ```\n\n2. **Modify CMakeLists.txt:**\n   - If you are using CMake, you may need to modify the `CMakeLists.txt` file.\n   - Look for any line setting the `CUDA_ARCH_BIN` or related variables and remove any unsupported architectures, like `20`.\n\n   Example:\n   ```cmake\n   set(CUDA_ARCH_BIN \"30 35 50 52 60 61 70 75\")\n   ```\n\n3. **Clean and Rebuild:**\n   - Clean any previous build artifacts to ensure the changes take effect. You can do this by running `make clean` or deleting the `build` directory if using CMake.\n   - Run `make all -j8` again.\n\n4. **Verify GPU Architecture:**\n   - Make sure your GPU architecture is supported by CUDA 9.1. If your GPU is very old, you might need to either downgrade CUDA or upgrade your GPU.\n\n5. **Check GPU Compatibility:**\n   - Verify your GPU's compute capability on NVIDIA's website to ensure it matches one of the architectures specified.\n\nOnce you've adjusted the architectures as shown above, try compiling again. This should resolve the error related to unsupported GPU architectures."
    }
]