[
    {
        "role": "user",
        "content": "How can I download and write a file from a Github repository using Requests in Python? I have a file located at \"https://github.com/someguy/brilliant/blob/master/somefile.txt\" and I want to download it and save it to the current working directory. I've tried using the following code:\n\n```python\nimport requests\nfrom os import getcwd\n\nurl = \"https://github.com/someguy/brilliant/blob/master/somefile.txt\"\ndirectory = getcwd()\nfilename = directory + 'somefile.txt'\nr = requests.get(url)\n\nf = open(filename,'w')\nf.write(r.content)\n```\n\nHowever, it's not working as expected. It doesn't download the contents of the file. Instead, I get a html response indicating \"Page not found\". What am I doing wrong?"
    },
    {
        "role": "assistant",
        "content": "The issue you're encountering is because the URL you're using points to the HTML page that displays the file on GitHub, not the raw contents of the file itself. To download the raw content of a file from a GitHub repository, you need to use the \"raw\" URL format. Here's how you can modify your code to achieve this:\n\n1. Change the URL to the raw version.\n2. Use the correct mode for writing binary data if needed.\n\nHere's the updated code:\n\n```python\nimport requests\nfrom os import getcwd\n\n# Use the raw URL\nurl = \"https://raw.githubusercontent.com/someguy/brilliant/master/somefile.txt\"\ndirectory = getcwd()\nfilename = directory + '/somefile.txt'  # Ensure a slash is added for the path\n\n# Make a GET request to fetch the raw file content\nr = requests.get(url)\n\n# Open the file in write mode\n# Use 'wb' if you're downloading a binary file\nwith open(filename, 'w') as f:\n    f.write(r.text)  # Use r.text for text files\n\nprint(f\"File downloaded and saved as {filename}\")\n```\n\n### Key Points:\n\n- **Raw URL**: Change the URL to the raw GitHub URL format. Replace `https://github.com/` with `https://raw.githubusercontent.com/`, and remove `/blob/`.\n- **File Writing**: Use `r.text` instead of `r.content` when writing text files. If you're downloading a binary file, you should open the file with `wb` mode and use `r.content`.\n\nThis should correctly download the file and save it to your current working directory."
    }
]