[
    {
        "role": "user",
        "content": "How can I retrieve the username of the currently logged-in user in a Django application? In my template, I have a form with the line `<h2>Publica tu tuit, {{ usuario.username.title }} </h2>`, where `usuario.username.title` is supposed to display the logged-in user's username. However, I am not sure how to get this information from the view."
    },
    {
        "role": "assistant",
        "content": "To display the username of the currently logged-in user in a Django application, you need to pass the user information from the view to the template. Django provides a convenient way to access the logged-in user's information via the `request.user` attribute. Here\u2019s how you can achieve this:\n\n1. **Ensure Authentication Middleware is Enabled:**\n   First, ensure that you have the `AuthenticationMiddleware` enabled in your settings. This middleware is responsible for associating users with requests using sessions.\n\n   ```python\n   MIDDLEWARE = [\n       # other middleware classes\n       'django.contrib.auth.middleware.AuthenticationMiddleware',\n       # other middleware classes\n   ]\n   ```\n\n2. **Accessing `request.user` in the View:**\n   In your view function or class-based view, you can access the currently logged-in user via `request.user`. You can then pass this user to the template context.\n\n   Here\u2019s an example using a function-based view:\n\n   ```python\n   from django.shortcuts import render\n   from django.contrib.auth.decorators import login_required\n\n   @login_required\n   def my_view(request):\n       # Get the logged-in user\n       usuario = request.user\n       \n       # Pass the user to the template context\n       return render(request, 'your_template.html', {'usuario': usuario})\n   ```\n\n   If you are using a class-based view, it would look something like this:\n\n   ```python\n   from django.views.generic import TemplateView\n   from django.contrib.auth.mixins import LoginRequiredMixin\n\n   class MyView(LoginRequiredMixin, TemplateView):\n       template_name = 'your_template.html'\n\n       def get_context_data(self, **kwargs):\n           context = super().get_context_data(**kwargs)\n           context['usuario'] = self.request.user\n           return context\n   ```\n\n3. **Updating the Template:**\n   In your template, you can then use `{{ usuario.username }}` to display the username. If you want to display the username with the first letter capitalized, you can use the `title` filter:\n\n   ```html\n   <h2>Publica tu tuit, {{ usuario.username|title }}</h2>\n   ```\n\nBy following these steps, you should be able to display the currently logged-in user's username in your template."
    }
]