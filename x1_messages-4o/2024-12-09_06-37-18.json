[
    {
        "role": "user",
        "content": "How can I download a file from an FTP server using Python? I have links to the files that look like this: ftp://ftp.cdc.gov/pub/Health_Statistics/NCHS/nhanes/2001-2002/L28POC_B.xpt. I can't find any documentation related to this on the Requests library website."
    },
    {
        "role": "assistant",
        "content": "The `requests` library in Python is great for HTTP and HTTPS requests, but it doesn't support the FTP protocol. For downloading files from an FTP server, you can use the `ftplib` module, which is part of the Python standard library.\n\nHere's a simple example of how you can download a file from an FTP server using `ftplib`:\n\n```python\nfrom ftplib import FTP\n\n# FTP server details\nftp_server = \"ftp.cdc.gov\"\nftp_path = \"/pub/Health_Statistics/NCHS/nhanes/2001-2002\"\nfile_name = \"L28POC_B.xpt\"\n\n# Connect to the FTP server\nftp = FTP(ftp_server)\nftp.login()  # Anonymous login\n\n# Change to the directory containing the file\nftp.cwd(ftp_path)\n\n# Open a local file to write the downloaded content\nwith open(file_name, 'wb') as local_file:\n    # Define a callback function to write data to the local file\n    def write_data(data):\n        local_file.write(data)\n\n    # Use the RETR FTP command to download the file\n    ftp.retrbinary(f\"RETR {file_name}\", write_data)\n\n# Close the FTP connection\nftp.quit()\n\nprint(f\"Downloaded {file_name} successfully.\")\n```\n\n### Explanation:\n- **FTP Connection**: We connect to the FTP server using `FTP(server_address)` and log in using `ftp.login()`. For anonymous access, you don't need to provide a username or password.\n- **Navigate to Directory**: Use `ftp.cwd(directory_path)` to change to the directory where the file is located.\n- **Download File**: Use `ftp.retrbinary()` to download the file. The `RETR` command is used to retrieve files, and `write_data` is a callback function that writes the downloaded data to a local file.\n- **Close Connection**: Always close the connection with `ftp.quit()` after the download is complete.\n\nThis script will download the specified file from the FTP server and save it locally with the same name. You can modify the script to handle authentication or change the local file path as needed."
    }
]