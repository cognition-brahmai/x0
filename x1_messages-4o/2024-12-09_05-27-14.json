[
    {
        "role": "user",
        "content": "I am using Django Admin and added a `get_absolute_url` function to my model. The function is defined as follows:\n\n```python\ndef get_absolute_url(self):\n    return '/foo/bar'\n```\n\nThe admin site picks it up and adds a \"view on site\" link to the detail page for that object when I put a real URL there instead of \"/foo/bar\". However, instead of going to `http://localhost:8000/foo/bar`, it redirects to `http://example.com/foo/bar`. What could be the issue?"
    },
    {
        "role": "assistant",
        "content": "The issue you're experiencing is likely related to the configuration of the `SITE_ID` and the `Sites` framework in Django. The \"View on site\" link in the Django admin uses the `get_absolute_url` method, but it also incorporates the domain name of the site as defined in the `Sites` framework.\n\nHere\u2019s how you can address this issue:\n\n1. **Check the `Sites` Framework Configuration:**\n   - Go to the Django admin interface.\n   - Navigate to the `Sites` section.\n   - Ensure that the domain name for the current site (usually `SITE_ID = 1`) is set to `localhost:8000` or whatever your development server domain and port are. If it\u2019s set to `example.com`, that\u2019s why it\u2019s redirecting there.\n\n2. **Update the Domain:**\n   - If your site is set to `example.com`, change it to `localhost:8000` (or your correct local domain and port) in the `Sites` framework.\n\n3. **Verify `SITE_ID` Setting:**\n   - Ensure that your `settings.py` file has the correct `SITE_ID` value that corresponds to the entry in the `Sites` framework that you want to use. Typically, it should be `SITE_ID = 1` for the default setup.\n\n4. **Check for Middleware or Overrides:**\n   - Review your middleware stack to ensure there isn\u2019t any middleware that\u2019s altering the request host or response redirects.\n   - Double-check if there are any custom overrides or configurations that might affect the URL generation.\n\nBy ensuring the `Sites` framework is correctly configured to reflect your development environment, the \"View on site\" link should generate the correct URL using `localhost:8000` instead of `example.com`."
    }
]