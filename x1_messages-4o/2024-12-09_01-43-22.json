[
    {
        "role": "user",
        "content": "When I execute `python setup.py test`, the dependencies listed in `tests_require` in setup.py are downloaded to the current directory. However, when I execute `python setup.py install`, the dependencies listed in `requires` are installed to `site-packages`. How can I specify the installation path of `tests_require` dependencies to be `site-packages` instead of the current directory?"
    },
    {
        "role": "assistant",
        "content": "When you run `python setup.py test`, the `tests_require` dependencies are downloaded to the current directory because `setuptools` uses `easy_install` to fetch these dependencies, which places them in the local directory where the command is executed.\n\nTo have the `tests_require` dependencies installed into `site-packages` instead, you can use a different approach by leveraging `tox` or `pytest` with `pytest-runner`. These tools provide more control over the testing environment and dependencies.\n\nHere\u2019s how you can achieve this:\n\n### Using `tox`\n\n1. **Install `tox`:**\n\n   First, make sure you have `tox` installed in your environment:\n\n   ```bash\n   pip install tox\n   ```\n\n2. **Create a `tox.ini` file:**\n\n   Create a `tox.ini` file in the root of your project with the following content:\n\n   ```ini\n   [tox]\n   envlist = py37, py38, py39  # Specify the Python versions you want to test against\n\n   [testenv]\n   deps =\n       # List your tests_require dependencies here\n       pytest\n       # other dependencies\n   commands =\n       pytest\n   ```\n\n3. **Run `tox`:**\n\n   Run `tox` to create isolated environments, install the dependencies into `site-packages` of those environments, and execute the tests:\n\n   ```bash\n   tox\n   ```\n\n### Using `pytest` with `pytest-runner`\n\n1. **Install `pytest` and `pytest-runner`:**\n\n   Make sure you have `pytest` and `pytest-runner` installed:\n\n   ```bash\n   pip install pytest pytest-runner\n   ```\n\n2. **Modify your `setup.py`:**\n\n   Update your `setup.py` to use `pytest-runner`:\n\n   ```python\n   from setuptools import setup\n\n   setup(\n       # ... other setup parameters\n       setup_requires=['pytest-runner'],\n       tests_require=[\n           'pytest',\n           # other dependencies\n       ],\n   )\n   ```\n\n3. **Run the tests:**\n\n   You can now run the tests, and the dependencies will be installed into `site-packages`:\n\n   ```bash\n   python setup.py test\n   ```\n\nBy using `tox` or `pytest-runner`, you can control the installation path of the `tests_require` dependencies and ensure they are installed into `site-packages` rather than the current directory."
    }
]