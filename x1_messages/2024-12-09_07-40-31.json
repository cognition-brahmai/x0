[
    {
        "role": "user",
        "content": "Develop a Python script that interacts with Google Cloud Storage. The script should be able to upload a local file to a specified bucket, list all files in the bucket, and download a specified file from the bucket."
    },
    {
        "role": "assistant",
        "content": "To develop a Python script that interacts with Google Cloud Storage, you'll need to use the `google-cloud-storage` library. Below is a step-by-step guide to create such a script.\n\n### Prerequisites\n\n1. **Install the Google Cloud Storage Client Library**:\n   You can install this library using pip:\n   ```bash\n   pip install google-cloud-storage\n   ```\n\n2. **Set up Authentication**:\n   - Create a service account in the Google Cloud Console.\n   - Download the JSON key file for the service account.\n   - Set the environment variable `GOOGLE_APPLICATION_CREDENTIALS` to the path of the JSON key file.\n     ```bash\n     export GOOGLE_APPLICATION_CREDENTIALS=\"/path/to/your/keyfile.json\"\n     ```\n\n3. **Create a Google Cloud Storage Bucket**:\n   - Ensure you have a bucket where you can upload and download files.\n\n### Script\n\nBelow is a Python script that demonstrates how to upload a local file to a specified bucket, list all files in the bucket, and download a specified file from the bucket.\n\n```python\nfrom google.cloud import storage\n\ndef upload_blob(bucket_name, source_file_name, destination_blob_name):\n    \"\"\"Uploads a file to the bucket.\"\"\"\n    # Initialize a storage client\n    storage_client = storage.Client()\n    \n    # Get the bucket\n    bucket = storage_client.bucket(bucket_name)\n    \n    # Create a blob object from the file\n    blob = bucket.blob(destination_blob_name)\n    \n    # Upload the file\n    blob.upload_from_filename(source_file_name)\n    \n    print(f\"File {source_file_name} uploaded to {destination_blob_name}.\")\n\ndef list_blobs(bucket_name):\n    \"\"\"Lists all the blobs in the bucket.\"\"\"\n    # Initialize a storage client\n    storage_client = storage.Client()\n    \n    # Get the bucket\n    bucket = storage_client.bucket(bucket_name)\n    \n    # List blobs\n    blobs = bucket.list_blobs()\n    \n    print(\"Blobs in bucket:\")\n    for blob in blobs:\n        print(blob.name)\n\ndef download_blob(bucket_name, source_blob_name, destination_file_name):\n    \"\"\"Downloads a blob from the bucket.\"\"\"\n    # Initialize a storage client\n    storage_client = storage.Client()\n    \n    # Get the bucket\n    bucket = storage_client.bucket(bucket_name)\n    \n    # Get the blob\n    blob = bucket.blob(source_blob_name)\n    \n    # Download the blob to a file\n    blob.download_to_filename(destination_file_name)\n    \n    print(f\"Blob {source_blob_name} downloaded to {destination_file_name}.\")\n\nif __name__ == \"__main__\":\n    # Set your bucket name\n    bucket_name = \"your-bucket-name\"\n    \n    # Upload a file\n    source_file_name = \"local/path/to/file.txt\"\n    destination_blob_name = \"storage-object-name.txt\"\n    upload_blob(bucket_name, source_file_name, destination_blob_name)\n    \n    # List all files in the bucket\n    list_blobs(bucket_name)\n    \n    # Download a file\n    source_blob_name = \"storage-object-name.txt\"\n    destination_file_name = \"local/path/to/downloaded_file.txt\"\n    download_blob(bucket_name, source_blob_name, destination_file_name)\n```\n\n### Explanation\n\n1. **Upload a File**:\n   - The `upload_blob` function takes the bucket name, local file path, and the destination blob name.\n   - It initializes a storage client, gets the bucket, creates a blob object, and uploads the file.\n\n2. **List All Files**:\n   - The `list_blobs` function takes the bucket name.\n   - It initializes a storage client, gets the bucket, and lists all blobs in the bucket.\n\n3. **Download a File**:\n   - The `download_blob` function takes the bucket name, source blob name, and the destination file path.\n   - It initializes a storage client, gets the bucket, gets the blob, and downloads it to the specified local path.\n\n### Usage\n\n- Replace `\"your-bucket-name\"`, `\"local/path/to/file.txt\"`, `\"storage-object-name.txt\"`, and `\"local/path/to/downloaded_file.txt\"` with your actual values.\n- Run the script using Python:\n  ```bash\n  python script_name.py\n  ```\n\nThis script provides basic functionalities to interact with Google Cloud Storage using Python."
    }
]