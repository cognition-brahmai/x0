[
    {
        "role": "user",
        "content": "Create a PHP script that connects to a MySQL database and performs CRUD operations on a table containing employee records.\nPLAINFORMAT"
    },
    {
        "role": "assistant",
        "content": "Alright, I'm going to help you create a PHP script that connects to a MySQL database and performs CRUD (Create, Read, Update, Delete) operations on a table containing employee records. Let's assume you have a basic understanding of PHP and MySQL.\n\nFirst, make sure you have a MySQL server set up and a database created. For this example, let's assume the database is named `employee_db`, and the table is named `employees` with the following columns:\n\n- id (INT, PRIMARY KEY, AUTO_INCREMENT)\n- first_name (VARCHAR)\n- last_name (VARCHAR)\n- email (VARCHAR)\n- salary (DECIMAL)\n\n### Step 1: Connect to the Database\n\nCreate a PHP file, say `db_connect.php`, to handle the database connection.\n\n```php\n<?php\n$servername = \"localhost\";\n$username = \"your_username\";\n$password = \"your_password\";\n$dbname = \"employee_db\";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```\n\nReplace `your_username` and `your_password` with your actual MySQL username and password.\n\n### Step 2: Create Operation\n\nCreate a form to add new employees.\n\n#### create_form.php\n\n```php\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Create Employee</title>\n</head>\n<body>\n    <h2>Create Employee</h2>\n    <form action=\"create.php\" method=\"post\">\n        First Name: <input type=\"text\" name=\"first_name\" required><br>\n        Last Name: <input type=\"text\" name=\"last_name\" required><br>\n        Email: <input type=\"email\" name=\"email\" required><br>\n        Salary: <input type=\"number\" step=\"0.01\" name=\"salary\" required><br>\n        <input type=\"submit\" value=\"Create Employee\">\n    </form>\n</body>\n</html>\n```\n\n#### create.php\n\n```php\n<?php\ninclude 'db_connect.php';\n\n$first_name = $_POST['first_name'];\n$last_name = $_POST['last_name'];\n$email = $_POST['email'];\n$salary = $_POST['salary'];\n\n$sql = \"INSERT INTO employees (first_name, last_name, email, salary) VALUES ('$first_name', '$last_name', '$email', '$salary')\";\n\nif ($conn->query($sql) === TRUE) {\n    echo \"New employee created successfully\";\n} else {\n    echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n}\n\n$conn->close();\n?>\n```\n\n### Step 3: Read Operation\n\nDisplay all employees.\n\n#### read.php\n\n```php\n<?php\ninclude 'db_connect.php';\n\n$sql = \"SELECT id, first_name, last_name, email, salary FROM employees\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n    echo \"<table border='1'>\n            <tr>\n                <th>ID</th>\n                <th>First Name</th>\n                <th>Last Name</th>\n                <th>Email</th>\n                <th>Salary</th>\n                <th>Action</th>\n            </tr>\";\n    while($row = $result->fetch_assoc()) {\n        echo \"<tr>\n                <td>\".$row[\"id\"].\"</td>\n                <td>\".$row[\"first_name\"].\"</td>\n                <td>\".$row[\"last_name\"].\"</td>\n                <td>\".$row[\"email\"].\"</td>\n                <td>\".$row[\"salary\"].\"</td>\n                <td>\n                    <a href='edit_form.php?id=\".$row[\"id\"].\"'>Edit</a> |\n                    <a href='delete.php?id=\".$row[\"id\"].\"'>Delete</a>\n                </td>\n              </tr>\";\n    }\n    echo \"</table>\";\n} else {\n    echo \"0 results\";\n}\n\n$conn->close();\n?>\n```\n\n### Step 4: Update Operation\n\nCreate a form to edit employee details.\n\n#### edit_form.php\n\n```php\n<?php\ninclude 'db_connect.php';\n\n$id = $_GET['id'];\n$sql = \"SELECT * FROM employees WHERE id=$id\";\n$result = $conn->query($sql);\n\nif ($result->num_rows == 1) {\n    $row = $result->fetch_assoc();\n}\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Edit Employee</title>\n</head>\n<body>\n    <h2>Edit Employee</h2>\n    <form action=\"update.php\" method=\"post\">\n        ID: <input type=\"text\" name=\"id\" value=\"<?php echo $row[\"id\"]; ?>\" readonly><br>\n        First Name: <input type=\"text\" name=\"first_name\" value=\"<?php echo $row[\"first_name\"]; ?>\" required><br>\n        Last Name: <input type=\"text\" name=\"last_name\" value=\"<?php echo $row[\"last_name\"]; ?>\" required><br>\n        Email: <input type=\"email\" name=\"email\" value=\"<?php echo $row[\"email\"]; ?>\" required><br>\n        Salary: <input type=\"number\" step=\"0.01\" name=\"salary\" value=\"<?php echo $row[\"salary\"]; ?>\" required><br>\n        <input type=\"submit\" value=\"Update Employee\">\n    </form>\n</body>\n</html>\n```\n\n#### update.php\n\n```php\n<?php\ninclude 'db_connect.php';\n\n$id = $_POST['id'];\n$first_name = $_POST['first_name'];\n$last_name = $_POST['last_name'];\n$email = $_POST['email'];\n$salary = $_POST['salary'];\n\n$sql = \"UPDATE employees SET first_name='$first_name', last_name='$last_name', email='$email', salary='$salary' WHERE id=$id\";\n\nif ($conn->query($sql) === TRUE) {\n    echo \"Employee updated successfully\";\n} else {\n    echo \"Error updating record: \" . $conn->error;\n}\n\n$conn->close();\n?>\n```\n\n### Step 5: Delete Operation\n\nCreate a script to delete an employee.\n\n#### delete.php\n\n```php\n<?php\ninclude 'db_connect.php';\n\n$id = $_GET['id'];\n$sql = \"DELETE FROM employees WHERE id=$id\";\n\nif ($conn->query($sql) === TRUE) {\n    echo \"Employee deleted successfully\";\n} else {\n    echo \"Error deleting record: \" . $conn->error;\n}\n\n$conn->close();\n?>\n```\n\n### Putting It All Together\n\n1. **Create**: Users can access `create_form.php` to add new employees.\n2. **Read**: `read.php` displays all employees with options to edit or delete.\n3. **Update**: Clicking \"Edit\" takes users to `edit_form.php`, where they can modify employee details and submit to `update.php`.\n4. **Delete**: Clicking \"Delete\" directs to `delete.php`, which removes the employee from the database.\n\nMake sure to handle SQL injections properly. In a production environment, use prepared statements or parameterized queries.\n\nThis should give you a basic CRUD application in PHP and MySQL. Let me know if you need further assistance!"
    }
]