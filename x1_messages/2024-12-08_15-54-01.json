[
    {
        "role": "user",
        "content": "Write a C++ program that simulates a basic calculator supporting addition, subtraction, multiplication, and division operations. The program should accept two numbers and an operator (+, -, *, /) as command-line arguments and return the result of the operation."
    },
    {
        "role": "assistant",
        "content": "Certainly! Below is a simple C++ program that acts as a basic calculator, performing addition, subtraction, multiplication, and division based on command-line arguments.\n\n```cpp\n#include <iostream>\n#include <cstdlib>\n\nint main(int argc, char* argv[]) {\n    if (argc != 4) {\n        std::cout << \"Usage: \" << argv[0] << \" number1 operator number2\" << std::endl;\n        return 1;\n    }\n\n    double num1 = std::atof(argv[1]);\n    double num2 = std::atof(argv[3]);\n    char op = argv[2][0];\n\n    double result;\n    switch (op) {\n        case '+':\n            result = num1 + num2;\n            break;\n        case '-':\n            result = num1 - num2;\n            break;\n        case '*':\n            result = num1 * num2;\n            break;\n        case '/':\n            if (num2 == 0) {\n                std::cout << \"Error: Division by zero.\" << std::endl;\n                return 1;\n            }\n            result = num1 / num2;\n            break;\n        default:\n            std::cout << \"Error: Invalid operator. Please use +, -, *, or /.\" << std::endl;\n            return 1;\n    }\n\n    std::cout << \"Result: \" << result << std::endl;\n    return 0;\n}\n```\n\n### Explanation:\n1. **Argument Checking**: The program checks if exactly three arguments are provided (number1, operator, number2). If not, it prints usage instructions.\n2. **Argument Parsing**: It converts the first and third arguments to doubles using `std::atof` and retrieves the operator from the second argument.\n3. **Operation Handling**: Using a `switch` statement, it performs the corresponding mathematical operation:\n   - Addition (`+`)\n   - Subtraction (`-`)\n   - Multiplication (`*`)\n   - Division (`/`), with a check to prevent division by zero.\n4. **Output**: It prints the result of the operation.\n\n### Compilation and Usage:\nTo compile the program, use a C++ compiler like `g++`:\n```sh\ng++ -o calculator calculator.cpp\n```\n\nTo run the program, provide the arguments as follows:\n```sh\n./calculator 5 + 3\n```\n\nThis will output:\n```\nResult: 8\n```\n\nMake sure to replace `5`, `+`, and `3` with your desired numbers and operator."
    }
]