[
    {
        "role": "user",
        "content": "Implement a PHP script that connects to a MySQL database and performs a query to retrieve all records from a \"users\" table where the user's age is between 18 and 25. Display the results in an HTML table format, sorted by last name in ascending order."
    },
    {
        "role": "assistant",
        "content": "To implement this, you'll need to have a MySQL database set up with a \"users\" table that includes at least the fields for first name, last name, and age. I'll guide you through writing a PHP script that connects to this database, performs the specified query, and displays the results in an HTML table.\n\nFirst, make sure you have PHP and MySQL installed on your server. You'll also need to know the database host, username, password, and database name to establish the connection.\n\nHere's a step-by-step guide:\n\n### Step 1: Create the Database and Table\n\nIf you haven't already created the \"users\" table, you can do so with the following SQL query:\n\n```sql\nCREATE TABLE users (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    first_name VARCHAR(100),\n    last_name VARCHAR(100),\n    age INT\n);\n```\n\nInsert some sample data:\n\n```sql\nINSERT INTO users (first_name, last_name, age) VALUES\n('John', 'Doe', 20),\n('Jane', 'Smith', 22),\n('Alice', 'Johnson', 18),\n('Bob', 'Brown', 25),\n('Charlie', 'Green', 30);\n```\n\n### Step 2: Write the PHP Script\n\nCreate a new PHP file, for example, `display_users.php`, and add the following code:\n\n```php\n<?php\n// Database connection parameters\n$host = 'localhost'; // or your database host\n$dbname = 'your_database_name';\n$username = 'your_username';\n$password = 'your_password';\n\n// Connect to the database\n$conn = new mysqli($host, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// SQL query to retrieve users aged between 18 and 25, sorted by last name\n$sql = \"SELECT first_name, last_name, age FROM users WHERE age BETWEEN 18 AND 25 ORDER BY last_name ASC\";\n$result = $conn->query($sql);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Users aged 18-25</title>\n    <style>\n        table {\n            width: 50%;\n            border-collapse: collapse;\n        }\n        th, td {\n            border: 1px solid black;\n            padding: 8px;\n            text-align: left;\n        }\n        th {\n            background-color: #f2f2f2;\n        }\n    </style>\n</head>\n<body>\n\n<h2>Users aged between 18 and 25</h2>\n\n<table>\n    <thead>\n        <tr>\n            <th>First Name</th>\n            <th>Last Name</th>\n            <th>Age</th>\n        </tr>\n    </thead>\n    <tbody>\n        <?php\n        if ($result->num_rows > 0) {\n            // Output data of each row\n            while($row = $result->fetch_assoc()) {\n                echo \"<tr>\";\n                echo \"<td>\" . $row[\"first_name\"] . \"</td>\";\n                echo \"<td>\" . $row[\"last_name\"] . \"</td>\";\n                echo \"<td>\" . $row[\"age\"] . \"</td>\";\n                echo \"</tr>\";\n            }\n        } else {\n            echo \"<tr><td colspan='3'>No users found.</td></tr>\";\n        }\n        ?>\n    </tbody>\n</table>\n\n</body>\n</html>\n\n<?php\n// Close the database connection\n$conn->close();\n?>\n```\n\n### Explanation:\n\n1. **Database Connection:**\n   - We use `mysqli` to connect to the MySQL database. Replace `'localhost'`, `'your_database_name'`, `'your_username'`, and `'your_password'` with your actual database connection details.\n\n2. **SQL Query:**\n   - The query selects `first_name`, `last_name`, and `age` from the `users` table where the `age` is between 18 and 25, ordered by `last_name` in ascending order.\n\n3. **HTML and PHP Integration:**\n   - The script generates an HTML table to display the results.\n   - PHP loops through the query results and outputs each user's information into table rows.\n\n4. **Styling:**\n   - Basic CSS is included to make the table look cleaner.\n\n5. **Error Handling:**\n   - If there's a connection error, it's handled and displayed.\n   - If no users are found, a message is displayed in the table.\n\n### Step 3: Upload and Test\n\n- Upload the `display_users.php` file to your web server.\n- Ensure that your database is properly set up with the \"users\" table and some sample data.\n- Access the script through your web browser (e.g., `http://yourserver.com/display_users.php`).\n\nYou should see an HTML table listing users aged between 18 and 25, sorted by their last names."
    }
]